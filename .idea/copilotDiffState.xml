<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/app/views/client_sessions/_form.html.erb">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/views/client_sessions/_form.html.erb" />
              <option name="originalContent" value="&lt;%= form_with(model: client_session, class: &quot;pure-form pure-form-stacked&quot;, data: { controller: &quot;validation client-rate&quot; }) do |form| %&gt;&#10;  &lt;%= render 'shared/error_explanation', model: client_session %&gt;&#10;&#10;  &lt;fieldset&gt;&#10;    &lt;legend&gt;Session Information&lt;/legend&gt;&#10;&#10;    &lt;div class=&quot;pure-g&quot;&gt;&#10;      &lt;div class=&quot;pure-u-1&quot;&gt;&#10;        &lt;%= form.label :client_id, &quot;Client&quot; %&gt;&#10;        &lt;%= form.collection_select :client_id, Client.where(active: true), :id, :name,&#10;            { prompt: &quot;Select a client&quot; },&#10;            { required: true, class: &quot;pure-input-1&quot;,&#10;              data: {&#10;                action: &quot;invalid-&gt;validation#markFieldAsInvalid change-&gt;client-rate#fetchClientRate&quot;,&#10;                client_rate_target: &quot;clientSelect&quot;&#10;              }&#10;            }&#10;        %&gt;&#10;      &lt;/div&gt;&#10;    &lt;/div&gt;&#10;&#10;    &lt;div class=&quot;pure-g&quot;&gt;&#10;      &lt;div class=&quot;pure-u-1 pure-u-md-1-3&quot;&gt;&#10;        &lt;%= form.label :hourly_session_rate_pence, &quot;Rate (£ per hour)&quot; %&gt;&#10;        &lt;%= form.text_field :hourly_session_rate_pence,&#10;            readonly: true,&#10;            class: &quot;pure-input-1&quot;,&#10;            data: { client_rate_target: &quot;rateField&quot; },&#10;            value: number_to_currency(client_session.hourly_session_rate&amp;.to_f || 0, unit: &quot;£&quot;)&#10;        %&gt;&#10;      &lt;/div&gt;&#10;&#10;      &lt;div class=&quot;pure-u-1 pure-u-md-1-3&quot;&gt;&#10;        &lt;%= form.label :session_date, &quot;Session Date&quot; %&gt;&#10;        &lt;%= form.date_field :session_date, required: true, class: &quot;pure-input-1&quot;, data: { action: &quot;invalid-&gt;validation#markFieldAsInvalid&quot; } %&gt;&#10;      &lt;/div&gt;&#10;&#10;      &lt;div class=&quot;pure-u-1 pure-u-md-1-3&quot;&gt;&#10;        &lt;%= form.label :duration, &quot;Duration (minutes)&quot; %&gt;&#10;        &lt;%= form.number_field :duration, required: true, min: 1, class: &quot;pure-input-1&quot;, data: { action: &quot;invalid-&gt;validation#markFieldAsInvalid&quot; } %&gt;&#10;      &lt;/div&gt;&#10;    &lt;/div&gt;&#10;&#10;    &lt;div class=&quot;pure-g&quot;&gt;&#10;      &lt;div class=&quot;pure-u-1&quot;&gt;&#10;        &lt;%= form.label :description, &quot;Session Description&quot; %&gt;&#10;        &lt;%= form.text_area :description, class: &quot;pure-input-1&quot;, rows: 3, placeholder: &quot;Enter session details or notes here&quot; %&gt;&#10;      &lt;/div&gt;&#10;    &lt;/div&gt;&#10;  &lt;/fieldset&gt;&#10;&#10;  &lt;div class=&quot;actions&quot;&gt;&#10;    &lt;%= form.submit class: &quot;pure-button pure-button-primary&quot;, data: { action: &quot;click-&gt;validation#resetValidationErrorText&quot; }  %&gt;&#10;  &lt;/div&gt;&#10;&lt;% end %&gt;&#10;" />
              <option name="updatedContent" value="&lt;%= form_with(model: client_session, class: &quot;pure-form pure-form-stacked&quot;, data: { controller: &quot;validation client-rate&quot; }) do |form| %&gt;&#10;  &lt;%= render 'shared/error_explanation', model: client_session %&gt;&#10;&#10;  &lt;fieldset&gt;&#10;    &lt;legend&gt;Session Information&lt;/legend&gt;&#10;&#10;    &lt;div class=&quot;pure-g&quot;&gt;&#10;      &lt;div class=&quot;pure-u-1&quot;&gt;&#10;        &lt;%= form.label :client_id, &quot;Client&quot; %&gt;&#10;        &lt;%= form.collection_select :client_id, Client.where(active: true), :id, :name,&#10;            { prompt: &quot;Select a client&quot; },&#10;            { required: true, class: &quot;pure-input-1&quot;,&#10;              data: {&#10;                action: &quot;invalid-&gt;validation#markFieldAsInvalid change-&gt;client-rate#fetchClientRate&quot;,&#10;                client_rate_target: &quot;clientSelect&quot;&#10;              }&#10;            }&#10;        %&gt;&#10;      &lt;/div&gt;&#10;    &lt;/div&gt;&#10;&#10;    &lt;div class=&quot;pure-g&quot;&gt;&#10;      &lt;div class=&quot;pure-u-1 pure-u-md-1-3&quot;&gt;&#10;        &lt;%= form.label :hourly_session_rate_pence, &quot;Rate (£ per hour)&quot; %&gt;&#10;        &lt;%= form.text_field :hourly_session_rate_pence,&#10;            readonly: true,&#10;            class: &quot;pure-input-1&quot;,&#10;            data: { client_rate_target: &quot;rateField&quot; },&#10;            value: number_to_currency(client_session.hourly_session_rate&amp;.to_f || 0, unit: &quot;£&quot;)&#10;        %&gt;&#10;      &lt;/div&gt;&#10;&#10;      &lt;div class=&quot;pure-u-1 pure-u-md-1-3&quot;&gt;&#10;        &lt;%= form.label :session_date, &quot;Session Date&quot; %&gt;&#10;        &lt;%= form.date_field :session_date, required: true, class: &quot;pure-input-1&quot;, data: { action: &quot;invalid-&gt;validation#markFieldAsInvalid&quot; } %&gt;&#10;      &lt;/div&gt;&#10;&#10;      &lt;div class=&quot;pure-u-1 pure-u-md-1-3&quot;&gt;&#10;        &lt;%= form.label :duration, &quot;Duration (minutes)&quot; %&gt;&#10;        &lt;%= form.number_field :duration, required: true, min: 1, class: &quot;pure-input-1&quot;, data: { action: &quot;invalid-&gt;validation#markFieldAsInvalid&quot; } %&gt;&#10;      &lt;/div&gt;&#10;    &lt;/div&gt;&#10;&#10;    &lt;div class=&quot;pure-g&quot;&gt;&#10;      &lt;div class=&quot;pure-u-1&quot;&gt;&#10;        &lt;%= form.label :description, &quot;Session Description&quot; %&gt;&#10;        &lt;%= form.text_area :description, class: &quot;pure-input-1&quot;, rows: 3, placeholder: &quot;Enter session details or notes here&quot; %&gt;&#10;      &lt;/div&gt;&#10;    &lt;/div&gt;&#10;  &lt;/fieldset&gt;&#10;&#10;  &lt;div class=&quot;form-buttons&quot;&gt;&#10;    &lt;%= form.submit class: &quot;pure-button pure-button-primary&quot;, data: { action: &quot;click-&gt;validation#resetValidationErrorText&quot; }  %&gt;&#10;    &lt;%= link_to &quot;Cancel&quot;, client_sessions_path, class: &quot;pure-button&quot; %&gt;&#10;  &lt;/div&gt;&#10;&lt;% end %&gt;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/views/clients/_buttons.html.erb">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/views/clients/_buttons.html.erb" />
              <option name="originalContent" value="&lt;%= link_to edit_client_path(client), class: &quot;pure-button #{button_size}&quot;, data: { turbo_frame: &quot;_top&quot; } do %&gt;&#10;  &lt;span class=&quot;material-symbols-outlined&quot;&gt;edit&lt;/span&gt; Edit&#10;&lt;% end %&gt;&#10;&#10;&lt;% if client.uninvoiced_sessions.any? %&gt;&#10;  &lt;%= link_to new_client_invoice_path(client), data: { turbo: false }, class: &quot;pure-button button-warning #{button_size}&quot; do %&gt;&#10;    &lt;span class=&quot;material-symbols-outlined&quot;&gt;receipt_long&lt;/span&gt; Invoice&#10;  &lt;% end %&gt;&#10;&lt;% else %&gt;&#10;  &lt;button class=&quot;pure-button button-warning &lt;%= button_size %&gt; disabled&quot; disabled&gt;&#10;    &lt;span class=&quot;material-symbols-outlined&quot;&gt;receipt_long&lt;/span&gt;Invoice&#10;  &lt;/button&gt;&#10;&lt;% end %&gt;&#10;&#10;&lt;%= render partial: 'shared/delete_confirmation', locals: {&#10;  entity_type: 'client',&#10;  entity_name: client.name,&#10;  button_size: button_size&#10;} %&gt;&#10;" />
              <option name="updatedContent" value="&lt;%= link_to edit_client_path(client), class: &quot;pure-button #{button_size}&quot;, data: { turbo_frame: &quot;_top&quot; } do %&gt;&#10;  &lt;span class=&quot;material-symbols-outlined&quot;&gt;edit&lt;/span&gt; Edit&#10;&lt;% end %&gt;&#10;&#10;&lt;% if client.uninvoiced_sessions.any? %&gt;&#10;  &lt;%= link_to new_client_invoice_path(client), data: { turbo: false }, class: &quot;pure-button button-warning #{button_size}&quot; do %&gt;&#10;    &lt;span class=&quot;material-symbols-outlined&quot;&gt;receipt_long&lt;/span&gt; Invoice&#10;  &lt;% end %&gt;&#10;&lt;% else %&gt;&#10;  &lt;button class=&quot;pure-button button-warning &lt;%= button_size %&gt; disabled&quot; disabled&gt;&#10;    &lt;span class=&quot;material-symbols-outlined&quot;&gt;receipt_long&lt;/span&gt;Invoice&#10;  &lt;/button&gt;&#10;&lt;% end %&gt;&#10;&#10;&lt;%= render partial: 'shared/delete_confirmation', locals: { &#10;  entity: client, &#10;  button_size: button_size &#10;} %&gt;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/views/clients/show.html.erb">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/views/clients/show.html.erb" />
              <option name="originalContent" value="&lt;% content_for :title, @client.name %&gt;&#10;&#10;&lt;div class=&quot;show-buttons&quot;&gt;&#10;  &lt;%= link_to edit_client_path(@client), class: &quot;pure-button pure-button-primary&quot; do %&gt;&#10;    &lt;span class=&quot;material-symbols-outlined&quot;&gt;edit&lt;/span&gt; Edit&#10;  &lt;% end %&gt;&#10;  &lt;%= button_to @client, method: :delete, class: &quot;pure-button button-error&quot;,&#10;      data: { turbo_confirm: &quot;Are you sure you want to delete this client?&quot; } do %&gt;&#10;    &lt;span class=&quot;material-symbols-outlined&quot;&gt;delete&lt;/span&gt; Delete&#10;  &lt;% end %&gt;&#10;  &lt;%= link_to clients_path, class: &quot;pure-button&quot; do %&gt;&#10;    &lt;span class=&quot;material-symbols-outlined&quot;&gt;arrow_back&lt;/span&gt; Back&#10;  &lt;% end %&gt;&#10;&lt;/div&gt;&#10;&#10;&lt;%= render @client %&gt;&#10;&#10;&lt;div class=&quot;pure-g&quot;&gt;&#10;  &lt;div class=&quot;pure-u-1&quot;&gt;&#10;    &lt;div class=&quot;action-buttons bottom-buttons&quot;&gt;&#10;      &lt;%= link_to new_client_path, class: &quot;pure-button&quot; do %&gt;&#10;        &lt;span class=&quot;material-symbols-outlined&quot;&gt;add&lt;/span&gt; New Client&#10;      &lt;% end %&gt;&#10;    &lt;/div&gt;&#10;  &lt;/div&gt;&#10;&lt;/div&gt;&#10;&#10;&lt;style&gt;&#10;  .bottom-buttons {&#10;    margin-top: 1em;&#10;    padding-top: 1em;&#10;    border-top: 1px solid #ddd;&#10;  }&#10;  &#10;  @media (max-width: 768px) {&#10;    .page-header {&#10;      flex-direction: column;&#10;      align-items: flex-start;&#10;    }&#10;    &#10;    .page-header h1 {&#10;      margin-bottom: 0.5em;&#10;    }&#10;  }&#10;&lt;/style&gt;&#10;" />
              <option name="updatedContent" value="&lt;% content_for :title, @client.name %&gt;&#10;&#10;&lt;div class=&quot;show-buttons&quot;&gt;&#10;  &lt;%= render partial: &quot;buttons&quot;, locals: { client: @client, button_size: &quot;&quot; } %&gt;&#10;  &lt;%= link_to clients_path, class: &quot;pure-button&quot; do %&gt;&#10;    &lt;span class=&quot;material-symbols-outlined&quot;&gt;arrow_back&lt;/span&gt; Back&#10;  &lt;% end %&gt;&#10;&lt;/div&gt;&#10;&#10;&lt;%= render @client %&gt;&#10;&#10;&lt;div class=&quot;pure-g&quot;&gt;&#10;  &lt;div class=&quot;pure-u-1&quot;&gt;&#10;    &lt;div class=&quot;action-buttons bottom-buttons&quot;&gt;&#10;      &lt;%= link_to new_client_path, class: &quot;pure-button&quot; do %&gt;&#10;        &lt;span class=&quot;material-symbols-outlined&quot;&gt;add&lt;/span&gt; New Client&#10;      &lt;% end %&gt;&#10;    &lt;/div&gt;&#10;  &lt;/div&gt;&#10;&lt;/div&gt;&#10;&#10;&lt;style&gt;&#10;  .bottom-buttons {&#10;    margin-top: 1em;&#10;    padding-top: 1em;&#10;    border-top: 1px solid #ddd;&#10;  }&#10;  &#10;  @media (max-width: 768px) {&#10;    .page-header {&#10;      flex-direction: column;&#10;      align-items: flex-start;&#10;    }&#10;    &#10;    .page-header h1 {&#10;      margin-bottom: 0.5em;&#10;    }&#10;  }&#10;&lt;/style&gt;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/views/messages/_form.html.erb">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/views/messages/_form.html.erb" />
              <option name="originalContent" value="&lt;%= form_with(model: message, class: &quot;pure-form pure-form-stacked&quot;) do |form| %&gt;&#10;  &lt;% if message.errors.any? %&gt;&#10;    &lt;div class=&quot;alert alert-danger&quot;&gt;&#10;      &lt;h2&gt;&lt;%= pluralize(message.errors.count, &quot;error&quot;) %&gt; prohibited this message from being saved:&lt;/h2&gt;&#10;      &lt;ul&gt;&#10;        &lt;% message.errors.full_messages.each do |message| %&gt;&#10;          &lt;li&gt;&lt;%= message %&gt;&lt;/li&gt;&#10;        &lt;% end %&gt;&#10;      &lt;/ul&gt;&#10;    &lt;/div&gt;&#10;  &lt;% end %&gt;&#10;&#10;  &lt;fieldset&gt;&#10;    &lt;legend&gt;&#10;      Message Content&#10;    &lt;/legend&gt;&#10;    &lt;%= form.label :text, &quot;Message Text&quot;, class: &quot;form-label&quot; %&gt;&#10;    &lt;%= form.rich_text_area :text, class: &quot;form-control&quot; %&gt;&#10;  &lt;/fieldset&gt;&#10;&#10;  &lt;fieldset&gt;&#10;    &lt;legend&gt;Validity Period&lt;/legend&gt;&#10;    &lt;div class=&quot;pure-g&quot;&gt;&#10;      &lt;div class=&quot;pure-u-1 pure-u-md-1-2&quot;&gt;&#10;        &lt;div class=&quot;field&quot;&gt;&#10;          &lt;%= form.label :from_date, &quot;From Date (optional)&quot; %&gt;&#10;          &lt;%= form.date_field :from_date, class: &quot;pure-input-1&quot; %&gt;&#10;          &lt;small class=&quot;form-text text-muted&quot;&gt;Leave blank to make the message effective immediately.&lt;/small&gt;&#10;        &lt;/div&gt;&#10;      &lt;/div&gt;&#10;      &lt;div class=&quot;pure-u-1 pure-u-md-1-2&quot;&gt;&#10;        &lt;div class=&quot;field&quot;&gt;&#10;          &lt;%= form.label :until_date, &quot;Until Date (optional)&quot; %&gt;&#10;          &lt;%= form.date_field :until_date, class: &quot;pure-input-1&quot; %&gt;&#10;          &lt;small class=&quot;form-text text-muted&quot;&gt;Leave blank if the message has no end date.&lt;/small&gt;&#10;        &lt;/div&gt;&#10;      &lt;/div&gt;&#10;    &lt;/div&gt;&#10;  &lt;/fieldset&gt;&#10;&#10;  &lt;fieldset&gt;&#10;    &lt;legend&gt;Message Recipients&lt;/legend&gt;&#10;&#10;    &lt;div data-controller=&quot;client-selection&quot;&gt;&#10;      &lt;div class=&quot;field checkbox-field&quot;&gt;&#10;        &lt;%= form.check_box :all_clients, data: { client_selection_target: &quot;applyToAll&quot;, action: &quot;change-&gt;client-selection#toggleClientSelection&quot; } %&gt;&#10;        &lt;%= form.label :all_clients, &quot;Apply to all clients&quot; %&gt;&#10;      &lt;/div&gt;&#10;&#10;      &lt;div id=&quot;client_selection&quot; data-client-selection-target=&quot;clientSelection&quot;&gt;&#10;        &lt;h4&gt;Or select specific clients:&lt;/h4&gt;&#10;        &lt;%= form.collection_check_boxes :client_ids, Client.order(:name), :id, :name do |b| %&gt;&#10;          &lt;div class=&quot;client-checkbox&quot;&gt;&#10;            &lt;%= b.check_box data: { client_selection_target: &quot;clientCheckbox&quot; } %&gt;&#10;            &lt;%= b.label %&gt;&#10;          &lt;/div&gt;&#10;        &lt;% end %&gt;&#10;      &lt;/div&gt;&#10;    &lt;/div&gt;&#10;  &lt;/fieldset&gt;&#10;&#10;  &lt;div class=&quot;actions&quot;&gt;&#10;    &lt;%= form.submit class: &quot;pure-button pure-button-primary&quot; %&gt;&#10;  &lt;/div&gt;&#10;&lt;% end %&gt;&#10;&#10;&lt;style&gt;&#10;    .field {&#10;        margin-bottom: 1em;&#10;        padding-right: 1em;&#10;    }&#10;&#10;    .form-buttons {&#10;        margin-top: 2em;&#10;    }&#10;&#10;    .align-right {&#10;        text-align: right;&#10;    }&#10;&#10;    .checkbox-field {&#10;        display: flex;&#10;        align-items: center;&#10;    }&#10;&#10;    .checkbox-field input[type=&quot;checkbox&quot;] {&#10;        margin-right: 0.5em;&#10;    }&#10;&#10;    .client-checkbox {&#10;        display: flex;&#10;        align-items: center;&#10;        margin-bottom: 0.5em;&#10;    }&#10;&#10;    .client-checkbox input[type=&quot;checkbox&quot;] {&#10;        margin-right: 0.5em;&#10;    }&#10;&lt;/style&gt;" />
              <option name="updatedContent" value="&lt;%= form_with(model: message, class: &quot;pure-form pure-form-stacked&quot;) do |form| %&gt;&#10;  &lt;% if message.errors.any? %&gt;&#10;    &lt;div class=&quot;alert alert-danger&quot;&gt;&#10;      &lt;h2&gt;&lt;%= pluralize(message.errors.count, &quot;error&quot;) %&gt; prohibited this message from being saved:&lt;/h2&gt;&#10;      &lt;ul&gt;&#10;        &lt;% message.errors.full_messages.each do |message| %&gt;&#10;          &lt;li&gt;&lt;%= message %&gt;&lt;/li&gt;&#10;        &lt;% end %&gt;&#10;      &lt;/ul&gt;&#10;    &lt;/div&gt;&#10;  &lt;% end %&gt;&#10;&#10;  &lt;fieldset&gt;&#10;    &lt;legend&gt;&#10;      Message Content&#10;    &lt;/legend&gt;&#10;    &lt;%= form.label :text, &quot;Message Text&quot;, class: &quot;form-label&quot; %&gt;&#10;    &lt;%= form.rich_text_area :text, class: &quot;form-control&quot; %&gt;&#10;  &lt;/fieldset&gt;&#10;&#10;  &lt;fieldset&gt;&#10;    &lt;legend&gt;Validity Period&lt;/legend&gt;&#10;    &lt;div class=&quot;pure-g&quot;&gt;&#10;      &lt;div class=&quot;pure-u-1 pure-u-md-1-2&quot;&gt;&#10;        &lt;div class=&quot;field&quot;&gt;&#10;          &lt;%= form.label :from_date, &quot;From Date (optional)&quot; %&gt;&#10;          &lt;%= form.date_field :from_date, class: &quot;pure-input-1&quot; %&gt;&#10;          &lt;small class=&quot;form-text text-muted&quot;&gt;Leave blank to make the message effective immediately.&lt;/small&gt;&#10;        &lt;/div&gt;&#10;      &lt;/div&gt;&#10;      &lt;div class=&quot;pure-u-1 pure-u-md-1-2&quot;&gt;&#10;        &lt;div class=&quot;field&quot;&gt;&#10;          &lt;%= form.label :until_date, &quot;Until Date (optional)&quot; %&gt;&#10;          &lt;%= form.date_field :until_date, class: &quot;pure-input-1&quot; %&gt;&#10;          &lt;small class=&quot;form-text text-muted&quot;&gt;Leave blank if the message has no end date.&lt;/small&gt;&#10;        &lt;/div&gt;&#10;      &lt;/div&gt;&#10;    &lt;/div&gt;&#10;  &lt;/fieldset&gt;&#10;&#10;  &lt;fieldset&gt;&#10;    &lt;legend&gt;Message Recipients&lt;/legend&gt;&#10;&#10;    &lt;div data-controller=&quot;client-selection&quot;&gt;&#10;      &lt;div class=&quot;field checkbox-field&quot;&gt;&#10;        &lt;%= form.check_box :all_clients, data: { client_selection_target: &quot;applyToAll&quot;, action: &quot;change-&gt;client-selection#toggleClientSelection&quot; } %&gt;&#10;        &lt;%= form.label :all_clients, &quot;Apply to all clients&quot; %&gt;&#10;      &lt;/div&gt;&#10;&#10;      &lt;div id=&quot;client_selection&quot; data-client-selection-target=&quot;clientSelection&quot;&gt;&#10;        &lt;h4&gt;Or select specific clients:&lt;/h4&gt;&#10;        &lt;%= form.collection_check_boxes :client_ids, Client.order(:name), :id, :name do |b| %&gt;&#10;          &lt;div class=&quot;client-checkbox&quot;&gt;&#10;            &lt;%= b.check_box data: { client_selection_target: &quot;clientCheckbox&quot; } %&gt;&#10;            &lt;%= b.label %&gt;&#10;          &lt;/div&gt;&#10;        &lt;% end %&gt;&#10;      &lt;/div&gt;&#10;    &lt;/div&gt;&#10;  &lt;/fieldset&gt;&#10;&#10;  &lt;div class=&quot;form-buttons&quot;&gt;&#10;    &lt;%= form.submit class: &quot;pure-button pure-button-primary&quot; %&gt;&#10;    &lt;%= link_to &quot;Cancel&quot;, messages_path, class: &quot;pure-button&quot; %&gt;&#10;  &lt;/div&gt;&#10;&lt;% end %&gt;&#10;&#10;&lt;style&gt;&#10;    .field {&#10;        margin-bottom: 1em;&#10;        padding-right: 1em;&#10;    }&#10;&#10;    .form-buttons {&#10;        margin-top: 2em;&#10;    }&#10;&#10;    .align-right {&#10;        text-align: right;&#10;    }&#10;&#10;    .checkbox-field {&#10;        display: flex;&#10;        align-items: center;&#10;    }&#10;&#10;    .checkbox-field input[type=&quot;checkbox&quot;] {&#10;        margin-right: 0.5em;&#10;    }&#10;&#10;    .client-checkbox {&#10;        display: flex;&#10;        align-items: center;&#10;        margin-bottom: 0.5em;&#10;    }&#10;&#10;    .client-checkbox input[type=&quot;checkbox&quot;] {&#10;        margin-right: 0.5em;&#10;    }&#10;&lt;/style&gt;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/views/payees/show.html.erb">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/views/payees/show.html.erb" />
              <option name="originalContent" value="&lt;% content_for :title, &quot;Payee Details&quot; %&gt;&#10;&#10;&lt;div class=&quot;show-buttons&quot;&gt;&#10;  &lt;div class=&quot;action-buttons&quot;&gt;&#10;    &lt;%= link_to payees_path, class: &quot;pure-button&quot; do %&gt;&#10;      &lt;span class=&quot;material-symbols-outlined&quot;&gt;arrow_back&lt;/span&gt; Back&#10;    &lt;% end %&gt;&#10;    &lt;%= link_to edit_payee_path(@payee), class: &quot;pure-button pure-button-primary&quot; do %&gt;&#10;      &lt;span class=&quot;material-symbols-outlined&quot;&gt;edit&lt;/span&gt; Edit&#10;    &lt;% end %&gt;&#10;    &lt;% if @payee.clients.empty? %&gt;&#10;      &lt;button class=&quot;pure-button button-danger&quot;&#10;              data-id=&quot;&lt;%= @payee.id %&gt;&quot;&#10;              data-name=&quot;&lt;%= @payee.name %&gt;&quot;&#10;              data-action=&quot;click-&gt;delete-confirmation#open&quot;&gt;&#10;        &lt;span class=&quot;material-symbols-outlined&quot;&gt;delete&lt;/span&gt; Delete&#10;      &lt;/button&gt;&#10;      &lt;%= render partial: 'shared/delete_confirmation_dialog', locals: { entity_type: 'payee' } %&gt;&#10;    &lt;% end %&gt;&#10;  &lt;/div&gt;&#10;&lt;/div&gt;&#10;&#10;&lt;div class=&quot;card mb-4&quot;&gt;&#10;  &lt;div class=&quot;page-header&quot;&gt;&#10;    &lt;h1&gt;Payee Details&lt;/h1&gt;&#10;  &lt;/div&gt;&#10;&lt;/div&gt;&#10;&#10;&lt;div class=&quot;pure-g&quot;&gt;&#10;  &lt;div class=&quot;pure-u-1 pure-u-md-1-2&quot;&gt;&#10;    &lt;div class=&quot;detail-section&quot;&gt;&#10;      &lt;h3&gt;Payee Information&lt;/h3&gt;&#10;      &lt;div class=&quot;detail-item&quot;&gt;&#10;        &lt;div class=&quot;detail-label&quot;&gt;Organisation:&lt;/div&gt;&#10;        &lt;div class=&quot;detail-value&quot;&gt;&lt;%= @payee.organisation %&gt;&lt;/div&gt;&#10;      &lt;/div&gt;&#10;      &lt;div class=&quot;detail-item&quot;&gt;&#10;        &lt;div class=&quot;detail-label&quot;&gt;Name:&lt;/div&gt;&#10;        &lt;div class=&quot;detail-value&quot;&gt;&lt;%= @payee.name %&gt;&lt;/div&gt;&#10;      &lt;/div&gt;&#10;      &lt;div class=&quot;detail-item&quot;&gt;&#10;        &lt;div class=&quot;detail-label&quot;&gt;Email:&lt;/div&gt;&#10;        &lt;div class=&quot;detail-value&quot;&gt;&lt;%= @payee.email %&gt;&lt;/div&gt;&#10;      &lt;/div&gt;&#10;      &lt;div class=&quot;detail-item&quot;&gt;&#10;        &lt;div class=&quot;detail-label&quot;&gt;Phone:&lt;/div&gt;&#10;        &lt;div class=&quot;detail-value&quot;&gt;&lt;%= @payee.phone %&gt;&lt;/div&gt;&#10;      &lt;/div&gt;&#10;      &lt;div class=&quot;detail-item&quot;&gt;&#10;        &lt;div class=&quot;detail-label&quot;&gt;Status:&lt;/div&gt;&#10;        &lt;div class=&quot;detail-value&quot;&gt;&#10;          &lt;span class=&quot;status-badge &lt;%= @payee.active? ? 'active' : 'inactive' %&gt;&quot;&gt;&#10;            &lt;%= @payee.active? ? 'Active' : 'Inactive' %&gt;&#10;          &lt;/span&gt;&#10;        &lt;/div&gt;&#10;      &lt;/div&gt;&#10;    &lt;/div&gt;&#10;  &lt;/div&gt;&#10;&#10;  &lt;div class=&quot;pure-u-1 pure-u-md-1-2&quot;&gt;&#10;    &lt;div class=&quot;detail-section&quot;&gt;&#10;      &lt;h3&gt;Address&lt;/h3&gt;&#10;      &lt;div class=&quot;detail-item&quot;&gt;&#10;        &lt;div class=&quot;detail-value address-block&quot;&gt;&#10;          &lt;%= @payee.address1 %&gt;&lt;br&gt;&#10;          &lt;% if @payee.address2.present? %&gt;&#10;            &lt;%= @payee.address2 %&gt;&lt;br&gt;&#10;          &lt;% end %&gt;&#10;          &lt;%= @payee.town %&gt;&lt;br&gt;&#10;          &lt;%= @payee.postcode %&gt;&#10;        &lt;/div&gt;&#10;      &lt;/div&gt;&#10;    &lt;/div&gt;&#10;  &lt;/div&gt;&#10;&lt;/div&gt;&#10;&#10;&lt;div class=&quot;pure-g&quot;&gt;&#10;  &lt;div class=&quot;pure-u-1&quot;&gt;&#10;    &lt;div class=&quot;detail-section&quot;&gt;&#10;      &lt;h3&gt;Clients&lt;/h3&gt;&#10;      &lt;% if @payee.clients.any? %&gt;&#10;        &lt;table class=&quot;pure-table pure-table-striped&quot; style=&quot;width: 100%;&quot;&gt;&#10;          &lt;thead&gt;&#10;            &lt;tr&gt;&#10;              &lt;th&gt;Client&lt;/th&gt;&#10;              &lt;th&gt;Email&lt;/th&gt;&#10;              &lt;th&gt;Status&lt;/th&gt;&#10;              &lt;th&gt;Actions&lt;/th&gt;&#10;            &lt;/tr&gt;&#10;          &lt;/thead&gt;&#10;          &lt;tbody&gt;&#10;            &lt;% @payee.clients.order(:name).each do |client| %&gt;&#10;              &lt;tr&gt;&#10;                &lt;td&gt;&lt;%= client.name %&gt;&lt;/td&gt;&#10;                &lt;td&gt;&lt;%= client.email %&gt;&lt;/td&gt;&#10;                &lt;td&gt;&#10;                  &lt;span class=&quot;status-badge &lt;%= client.active? ? 'active' : 'inactive' %&gt;&quot;&gt;&#10;                    &lt;%= client.active? ? 'Active' : 'Inactive' %&gt;&#10;                  &lt;/span&gt;&#10;                &lt;/td&gt;&#10;                &lt;td&gt;&#10;                  &lt;%= link_to &quot;View&quot;, client, class: &quot;pure-button pure-button-primary button-small&quot; %&gt;&#10;                &lt;/td&gt;&#10;              &lt;/tr&gt;&#10;            &lt;% end %&gt;&#10;          &lt;/tbody&gt;&#10;        &lt;/table&gt;&#10;      &lt;% else %&gt;&#10;        &lt;p&gt;This payee is not associated with any clients.&lt;/p&gt;&#10;      &lt;% end %&gt;&#10;    &lt;/div&gt;&#10;  &lt;/div&gt;&#10;&lt;/div&gt;&#10;&#10;&#10;&#10;&lt;style&gt;&#10;  .detail-section {&#10;    margin-bottom: 1.5em;&#10;    background-color: #f8f9fa;&#10;    padding: 1em;&#10;    border-radius: 4px;&#10;    border-left: 4px solid #0078e7;&#10;  }&#10;&#10;  .detail-section h3 {&#10;    margin-top: 0;&#10;    margin-bottom: 0.75em;&#10;    color: #333;&#10;    font-size: 1.2em;&#10;    border-bottom: 1px solid #ddd;&#10;    padding-bottom: 0.5em;&#10;  }&#10;&#10;  .detail-item {&#10;    margin-bottom: 0.75em;&#10;    display: flex;&#10;  }&#10;&#10;  .detail-label {&#10;    font-weight: bold;&#10;    width: 120px;&#10;    flex-shrink: 0;&#10;  }&#10;&#10;  .detail-value {&#10;    flex-grow: 1;&#10;  }&#10;&#10;  .address-block {&#10;    line-height: 1.5;&#10;  }&#10;&#10;  .status-badge {&#10;    padding: 4px 8px;&#10;    border-radius: 12px;&#10;    font-size: 0.85em;&#10;    font-weight: bold;&#10;    display: inline-block;&#10;  }&#10;&#10;  .status-badge.active {&#10;    background-color: #e8f5e9;&#10;    color: #2e7d32;&#10;    border: 1px solid #2e7d32;&#10;  }&#10;&#10;  .status-badge.inactive {&#10;    background-color: #ffebee;&#10;    color: #c62828;&#10;    border: 1px solid #c62828;&#10;  }&#10;&#10;  @media (max-width: 768px) {&#10;    .detail-item {&#10;      flex-direction: column;&#10;    }&#10;&#10;    .detail-label {&#10;      width: 100%;&#10;      margin-bottom: 0.25em;&#10;    }&#10;  }&#10;&lt;/style&gt;&#10;" />
              <option name="updatedContent" value="&lt;% content_for :title, &quot;Payee Details&quot; %&gt;&#10;&#10;&lt;div class=&quot;show-buttons&quot;&gt;&#10;  &lt;div class=&quot;action-buttons&quot;&gt;&#10;    &lt;%= link_to payees_path, class: &quot;pure-button&quot; do %&gt;&#10;      &lt;span class=&quot;material-symbols-outlined&quot;&gt;arrow_back&lt;/span&gt; Back&#10;    &lt;% end %&gt;&#10;    &lt;%= render partial: &quot;buttons&quot;, locals: { payee: @payee, button_size: &quot;&quot; } %&gt;&#10;  &lt;/div&gt;&#10;&lt;/div&gt;&#10;&#10;&lt;div class=&quot;card mb-4&quot;&gt;&#10;  &lt;div class=&quot;page-header&quot;&gt;&#10;    &lt;h1&gt;Payee Details&lt;/h1&gt;&#10;  &lt;/div&gt;&#10;&lt;/div&gt;&#10;&#10;&lt;div class=&quot;pure-g&quot;&gt;&#10;  &lt;div class=&quot;pure-u-1 pure-u-md-1-2&quot;&gt;&#10;    &lt;div class=&quot;detail-section&quot;&gt;&#10;      &lt;h3&gt;Payee Information&lt;/h3&gt;&#10;      &lt;div class=&quot;detail-item&quot;&gt;&#10;        &lt;div class=&quot;detail-label&quot;&gt;Organisation:&lt;/div&gt;&#10;        &lt;div class=&quot;detail-value&quot;&gt;&lt;%= @payee.organisation %&gt;&lt;/div&gt;&#10;      &lt;/div&gt;&#10;      &lt;div class=&quot;detail-item&quot;&gt;&#10;        &lt;div class=&quot;detail-label&quot;&gt;Name:&lt;/div&gt;&#10;        &lt;div class=&quot;detail-value&quot;&gt;&lt;%= @payee.name %&gt;&lt;/div&gt;&#10;      &lt;/div&gt;&#10;      &lt;div class=&quot;detail-item&quot;&gt;&#10;        &lt;div class=&quot;detail-label&quot;&gt;Email:&lt;/div&gt;&#10;        &lt;div class=&quot;detail-value&quot;&gt;&lt;%= @payee.email %&gt;&lt;/div&gt;&#10;      &lt;/div&gt;&#10;      &lt;div class=&quot;detail-item&quot;&gt;&#10;        &lt;div class=&quot;detail-label&quot;&gt;Phone:&lt;/div&gt;&#10;        &lt;div class=&quot;detail-value&quot;&gt;&lt;%= @payee.phone %&gt;&lt;/div&gt;&#10;      &lt;/div&gt;&#10;      &lt;div class=&quot;detail-item&quot;&gt;&#10;        &lt;div class=&quot;detail-label&quot;&gt;Status:&lt;/div&gt;&#10;        &lt;div class=&quot;detail-value&quot;&gt;&#10;          &lt;span class=&quot;status-badge &lt;%= @payee.active? ? 'active' : 'inactive' %&gt;&quot;&gt;&#10;            &lt;%= @payee.active? ? 'Active' : 'Inactive' %&gt;&#10;          &lt;/span&gt;&#10;        &lt;/div&gt;&#10;      &lt;/div&gt;&#10;    &lt;/div&gt;&#10;  &lt;/div&gt;&#10;&#10;  &lt;div class=&quot;pure-u-1 pure-u-md-1-2&quot;&gt;&#10;    &lt;div class=&quot;detail-section&quot;&gt;&#10;      &lt;h3&gt;Address&lt;/h3&gt;&#10;      &lt;div class=&quot;detail-item&quot;&gt;&#10;        &lt;div class=&quot;detail-value address-block&quot;&gt;&#10;          &lt;%= @payee.address1 %&gt;&lt;br&gt;&#10;          &lt;% if @payee.address2.present? %&gt;&#10;            &lt;%= @payee.address2 %&gt;&lt;br&gt;&#10;          &lt;% end %&gt;&#10;          &lt;%= @payee.town %&gt;&lt;br&gt;&#10;          &lt;%= @payee.postcode %&gt;&#10;        &lt;/div&gt;&#10;      &lt;/div&gt;&#10;    &lt;/div&gt;&#10;  &lt;/div&gt;&#10;&lt;/div&gt;&#10;&#10;&lt;div class=&quot;pure-g&quot;&gt;&#10;  &lt;div class=&quot;pure-u-1&quot;&gt;&#10;    &lt;div class=&quot;detail-section&quot;&gt;&#10;      &lt;h3&gt;Clients&lt;/h3&gt;&#10;      &lt;% if @payee.clients.any? %&gt;&#10;        &lt;table class=&quot;pure-table pure-table-striped&quot; style=&quot;width: 100%;&quot;&gt;&#10;          &lt;thead&gt;&#10;            &lt;tr&gt;&#10;              &lt;th&gt;Client&lt;/th&gt;&#10;              &lt;th&gt;Email&lt;/th&gt;&#10;              &lt;th&gt;Status&lt;/th&gt;&#10;              &lt;th&gt;Actions&lt;/th&gt;&#10;            &lt;/tr&gt;&#10;          &lt;/thead&gt;&#10;          &lt;tbody&gt;&#10;            &lt;% @payee.clients.order(:name).each do |client| %&gt;&#10;              &lt;tr&gt;&#10;                &lt;td&gt;&lt;%= client.name %&gt;&lt;/td&gt;&#10;                &lt;td&gt;&lt;%= client.email %&gt;&lt;/td&gt;&#10;                &lt;td&gt;&#10;                  &lt;span class=&quot;status-badge &lt;%= client.active? ? 'active' : 'inactive' %&gt;&quot;&gt;&#10;                    &lt;%= client.active? ? 'Active' : 'Inactive' %&gt;&#10;                  &lt;/span&gt;&#10;                &lt;/td&gt;&#10;                &lt;td&gt;&#10;                  &lt;%= link_to &quot;View&quot;, client, class: &quot;pure-button pure-button-primary button-small&quot; %&gt;&#10;                &lt;/td&gt;&#10;              &lt;/tr&gt;&#10;            &lt;% end %&gt;&#10;          &lt;/tbody&gt;&#10;        &lt;/table&gt;&#10;      &lt;% else %&gt;&#10;        &lt;p&gt;This payee is not associated with any clients.&lt;/p&gt;&#10;      &lt;% end %&gt;&#10;    &lt;/div&gt;&#10;  &lt;/div&gt;&#10;&lt;/div&gt;&#10;&#10;&#10;&#10;&lt;style&gt;&#10;  .detail-section {&#10;    margin-bottom: 1.5em;&#10;    background-color: #f8f9fa;&#10;    padding: 1em;&#10;    border-radius: 4px;&#10;    border-left: 4px solid #0078e7;&#10;  }&#10;&#10;  .detail-section h3 {&#10;    margin-top: 0;&#10;    margin-bottom: 0.75em;&#10;    color: #333;&#10;    font-size: 1.2em;&#10;    border-bottom: 1px solid #ddd;&#10;    padding-bottom: 0.5em;&#10;  }&#10;&#10;  .detail-item {&#10;    margin-bottom: 0.75em;&#10;    display: flex;&#10;  }&#10;&#10;  .detail-label {&#10;    font-weight: bold;&#10;    width: 120px;&#10;    flex-shrink: 0;&#10;  }&#10;&#10;  .detail-value {&#10;    flex-grow: 1;&#10;  }&#10;&#10;  .address-block {&#10;    line-height: 1.5;&#10;  }&#10;&#10;  .status-badge {&#10;    padding: 4px 8px;&#10;    border-radius: 12px;&#10;    font-size: 0.85em;&#10;    font-weight: bold;&#10;    display: inline-block;&#10;  }&#10;&#10;  .status-badge.active {&#10;    background-color: #e8f5e9;&#10;    color: #2e7d32;&#10;    border: 1px solid #2e7d32;&#10;  }&#10;&#10;  .status-badge.inactive {&#10;    background-color: #ffebee;&#10;    color: #c62828;&#10;    border: 1px solid #c62828;&#10;  }&#10;&#10;  @media (max-width: 768px) {&#10;    .detail-item {&#10;      flex-direction: column;&#10;    }&#10;&#10;    .detail-label {&#10;      width: 100%;&#10;      margin-bottom: 0.25em;&#10;    }&#10;  }&#10;&lt;/style&gt;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/spec/system/payees_spec.rb">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/spec/system/payees_spec.rb" />
              <option name="updatedContent" value="require 'rails_helper'&#10;&#10;RSpec.describe &quot;Payees&quot;, type: :system do&#10;  describe &quot;New payee&quot; do&#10;    subject(:new_payee) { FactoryBot.build(:payee) }&#10;&#10;    it &quot;allows adding a new payee with valid information&quot; do&#10;      visit new_payee_path&#10;&#10;      # Fill in payee information&#10;      fill_in &quot;Name&quot;, with: new_payee.name&#10;      fill_in &quot;Organisation&quot;, with: new_payee.organisation&#10;      fill_in &quot;Email&quot;, with: new_payee.email&#10;      fill_in &quot;Address Line 1&quot;, with: new_payee.address1&#10;      fill_in &quot;Town&quot;, with: new_payee.town&#10;      fill_in &quot;Postcode&quot;, with: new_payee.postcode&#10;&#10;      # Submit the form&#10;      click_button &quot;Create Payee&quot;&#10;&#10;      # Read the created record and check that it matches what was entered.&#10;      expect(page).to have_content(&quot;Payee was successfully created&quot;)&#10;&#10;      created_payee = Payee.find_by(email: new_payee.email)&#10;      expect(created_payee).to have_attributes(&#10;        name: new_payee.name, &#10;        organisation: new_payee.organisation,&#10;        email: new_payee.email, &#10;        address1: new_payee.address1,&#10;        town: new_payee.town, &#10;        postcode: new_payee.postcode&#10;      )&#10;    end&#10;&#10;    it &quot;shows validation errors when submitting invalid information&quot;, js: true do&#10;      visit new_payee_path&#10;&#10;      # Submit without filling any fields&#10;      click_button &quot;Create Payee&quot;&#10;&#10;      # Expect to see validation errors&#10;      expect(page).to have_content(&quot;prohibited this record from being saved&quot;)&#10;      expect(page).to have_content(&quot;Name can't be blank&quot;)&#10;      expect(page).to have_content(&quot;Email can't be blank&quot;)&#10;      expect(page).to have_content(&quot;Address Line 1 can't be blank&quot;)&#10;      expect(page).to have_content(&quot;Town can't be blank&quot;)&#10;&#10;      # Fill in just one field and submit again&#10;      fill_in &quot;Name&quot;, with: &quot;The Bursar&quot;&#10;      click_button &quot;Create Payee&quot;&#10;&#10;      # Should still show errors for other fields&#10;      expect(page).to have_content(&quot;prohibited this record from being saved&quot;)&#10;      expect(page).not_to have_content(&quot;Name can't be blank&quot;)&#10;      expect(page).to have_content(&quot;Email can't be blank&quot;)&#10;    end&#10;&#10;    it &quot;validates postcode format&quot; do&#10;      visit new_payee_path&#10;&#10;      # Fill in all required fields but with an invalid postcode&#10;      fill_in &quot;Name&quot;, with: &quot;The Bursar&quot;&#10;      fill_in &quot;Organisation&quot;, with: &quot;The College&quot;&#10;      fill_in &quot;Email&quot;, with: &quot;bursar@college.edu&quot;&#10;      fill_in &quot;Address Line 1&quot;, with: &quot;Financial Office&quot;&#10;      fill_in &quot;Town&quot;, with: &quot;Cambridge&quot;&#10;      fill_in &quot;Postcode&quot;, with: &quot;invalid&quot;&#10;&#10;      # Submit the form&#10;      click_button &quot;Create Payee&quot;&#10;&#10;      # Expect to see postcode validation error&#10;      expect(page).to have_content(&quot;Postcode is badly formed postcode&quot;)&#10;&#10;      # Fix the postcode and try again&#10;      fill_in &quot;Postcode&quot;, with: &quot;CB2 1TN&quot;&#10;      click_button &quot;Create Payee&quot;&#10;&#10;      # Should be successful now&#10;      expect(page).to have_content(&quot;Payee was successfully created&quot;)&#10;    end&#10;  end&#10;&#10;  describe &quot;Active flag functionality&quot; do&#10;    let!(:active_payee) { FactoryBot.create(:payee, name: &quot;Active Payee&quot;, active: true) }&#10;    let!(:inactive_payee) { FactoryBot.create(:payee, name: &quot;Inactive Payee&quot;, active: false) }&#10;&#10;    it &quot;sets new payees as active by default&quot; do&#10;      visit new_payee_path&#10;&#10;      # Fill in minimum required information&#10;      fill_in &quot;Name&quot;, with: &quot;New Test Payee&quot;&#10;      fill_in &quot;Email&quot;, with: &quot;test@example.com&quot;&#10;      fill_in &quot;Address Line 1&quot;, with: &quot;123 Test St&quot;&#10;      fill_in &quot;Town&quot;, with: &quot;Testville&quot;&#10;      fill_in &quot;Postcode&quot;, with: &quot;SW1A 1AA&quot;&#10;&#10;      # Submit the form&#10;      click_button &quot;Create Payee&quot;&#10;&#10;      # Verify payee was created and is active by default&#10;      expect(page).to have_content(&quot;Payee was successfully created&quot;)&#10;      created_payee = Payee.find_by(email: &quot;test@example.com&quot;)&#10;      expect(created_payee.active).to be true&#10;    end&#10;&#10;    it &quot;does not show active toggle when creating a payee&quot; do&#10;      visit new_payee_path&#10;      expect(page).not_to have_content(&quot;Active Payee&quot;)&#10;    end&#10;&#10;    it &quot;shows active toggle when editing an active payee&quot; do&#10;      visit edit_payee_path(active_payee)&#10;      expect(page).to have_content(&quot;Active Payee&quot;)&#10;      expect(page).to have_field('payee_active', visible: false, checked: true)&#10;    end&#10;&#10;    it &quot;shows in-active toggle when editing an inactive payee&quot; do&#10;      visit edit_payee_path(inactive_payee)&#10;      expect(page).to have_content(&quot;Active Payee&quot;)&#10;      expect(page).to have_field('payee_active', visible: false, checked: false)&#10;    end&#10;&#10;    it &quot;allows changing payee to inactive status&quot; do&#10;      # Make active payee inactive&#10;      visit edit_payee_path(active_payee)&#10;&#10;      find(&quot;label[for='payee_active']&quot;).click&#10;      click_button &quot;Update Payee&quot;&#10;&#10;      expect(page).to have_content(&quot;Payee was successfully updated&quot;)&#10;      expect(active_payee.reload.active).to be false&#10;    end&#10;&#10;    it &quot;allows changing payee to active status&quot; do&#10;      # Make inactive payee active&#10;      visit edit_payee_path(inactive_payee)&#10;&#10;      find(&quot;label[for='payee_active']&quot;).click&#10;      click_button &quot;Update Payee&quot;&#10;&#10;      expect(page).to have_content(&quot;Payee was successfully updated&quot;)&#10;      expect(inactive_payee.reload.active).to be true&#10;    end&#10;&#10;    it &quot;displays active status on payee show page&quot; do&#10;      visit payee_path(active_payee)&#10;      within('.status-badge.active') do&#10;        expect(page).to have_content(&quot;Yes&quot;)&#10;      end&#10;&#10;      visit payee_path(inactive_payee)&#10;      within('.status-badge.inactive') do&#10;        expect(page).to have_content(&quot;No&quot;)&#10;      end&#10;    end&#10;&#10;    it &quot;displays active status in payee index&quot; do&#10;      visit payees_path&#10;&#10;      within(&quot;#payee_#{active_payee.id}&quot;) do&#10;        expect(page).to have_selector('.status-badge.active', text: 'Active')&#10;      end&#10;&#10;      within(&quot;#payee_#{inactive_payee.id}&quot;) do&#10;        expect(page).to have_selector('.status-badge.inactive', text: 'Inactive')&#10;      end&#10;    end&#10;&#10;    it &quot;filters payees based on active status&quot; do&#10;      visit payees_path&#10;&#10;      # Initially should show all payees&#10;      expect(page).to have_content(&quot;Active Payee&quot;)&#10;      expect(page).to have_content(&quot;Inactive Payee&quot;)&#10;&#10;      # Filter to show only active payees&#10;      find(&quot;label[for='active_only']&quot;).click&#10;&#10;      # Should now only show active payees&#10;      expect(page).to have_content(&quot;Active Payee&quot;)&#10;      expect(page).not_to have_content(&quot;Inactive Payee&quot;)&#10;&#10;      # Uncheck to show all payees again&#10;      find(&quot;label[for='active_only']&quot;).click&#10;&#10;      # Should show all payees again&#10;      expect(page).to have_content(&quot;Active Payee&quot;)&#10;      expect(page).to have_content(&quot;Inactive Payee&quot;)&#10;    end&#10;  end&#10;&#10;  describe &quot;Deletion restrictions&quot; do&#10;    let!(:payee_with_clients) { FactoryBot.create(:payee, name: &quot;Payee with Clients&quot;) }&#10;    let!(:payee_without_clients) { FactoryBot.create(:payee, name: &quot;Payee without Clients&quot;) }&#10;    let!(:client) { FactoryBot.create(:client, paid_by: payee_with_clients) }&#10;&#10;    it &quot;prevents deletion of payee with associated clients&quot; do&#10;      visit payees_path&#10;&#10;      within(&quot;#payee_#{payee_with_clients.id}&quot;) do&#10;        click_button &quot;Delete&quot;&#10;      end&#10;&#10;      # Should show error message&#10;      expect(page).to have_content(&quot;Cannot delete payee who has associated clients&quot;)&#10;      &#10;      # Payee should still exist&#10;      expect(Payee.exists?(payee_with_clients.id)).to be true&#10;    end&#10;&#10;    it &quot;allows deletion of payee without associated clients&quot;, js: true do&#10;      visit payees_path&#10;&#10;      within(&quot;#payee_#{payee_without_clients.id}&quot;) do&#10;        click_button &quot;Delete&quot;&#10;      end&#10;&#10;      # Should show confirmation dialog&#10;      within(&quot;.modal&quot;) do&#10;        expect(page).to have_content(&quot;Are you sure you want to delete&quot;)&#10;        expect(page).to have_content(&quot;Payee without Clients&quot;)&#10;        click_button &quot;Delete&quot;&#10;      end&#10;&#10;      # Should show success message&#10;      expect(page).to have_content(&quot;Payee was successfully destroyed&quot;)&#10;      &#10;      # Payee should be deleted&#10;      expect(Payee.exists?(payee_without_clients.id)).to be false&#10;    end&#10;&#10;    it &quot;does not show delete button for payee with clients&quot; do&#10;      visit payee_path(payee_with_clients)&#10;      &#10;      expect(page).not_to have_button(&quot;Delete&quot;)&#10;    end&#10;&#10;    it &quot;shows delete button for payee without clients&quot; do&#10;      visit payee_path(payee_without_clients)&#10;      &#10;      expect(page).to have_button(&quot;Delete&quot;)&#10;    end&#10;  end&#10;&#10;  describe &quot;Client associations display&quot; do&#10;    let!(:payee) { FactoryBot.create(:payee, name: &quot;Test Payee&quot;) }&#10;    let!(:client1) { FactoryBot.create(:client, name: &quot;Client One&quot;, paid_by: payee) }&#10;    let!(:client2) { FactoryBot.create(:client, name: &quot;Client Two&quot;, paid_by: payee) }&#10;&#10;    it &quot;displays associated clients on payee show page&quot; do&#10;      visit payee_path(payee)&#10;&#10;      expect(page).to have_content(&quot;Clients (2)&quot;)&#10;      expect(page).to have_content(&quot;Client One&quot;)&#10;      expect(page).to have_content(&quot;Client Two&quot;)&#10;    end&#10;&#10;    it &quot;displays client count in payee index&quot; do&#10;      visit payees_path&#10;&#10;      within(&quot;#payee_#{payee.id}&quot;) do&#10;        expect(page).to have_content(&quot;2 clients&quot;)&#10;      end&#10;    end&#10;&#10;    it &quot;shows zero clients for payee without clients&quot; do&#10;      payee_no_clients = FactoryBot.create(:payee, name: &quot;No Clients Payee&quot;)&#10;      &#10;      visit payees_path&#10;&#10;      within(&quot;#payee_#{payee_no_clients.id}&quot;) do&#10;        expect(page).to have_content(&quot;0 clients&quot;)&#10;      end&#10;    end&#10;  end&#10;end" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>