<% content_for :title, "Clients" %>

<h1>Clients</h1>

<div class="pure-g">
  <div class="pure-u-1">
    <table class="pure-table pure-table-striped" style="width: 100%;">
      <thead>
        <tr>
          <th>Name</th>
          <th>Email</th>
          <th>Address</th>
          <th>Current Rate</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <% if @clients.any? %>
          <% @clients.each do |client| %>
            <tr id="<%= dom_id client %>">
              <td><%= client.name %></td>
              <td><%= client.email %></td>
              <td><%= full_address(client) %></td>
              <td><%= number_to_currency(client.current_rate&.amount.to_f / 100, unit: "Â£") %></td>
              <td>
                <%= link_to "Show", client, class: "pure-button pure-button-primary button-small" %>
                <%= link_to "Edit", edit_client_path(client), class: "pure-button button-small" %>
                <%= link_to "Delete", client_path(client), class: "pure-button button-error button-small", 
                    data: { turbo_method: :delete, turbo_confirm: "Are you sure you want to delete this client?" } %>
              </td>
            </tr>
          <% end %>
        <% else %>
          <tr>
            <td colspan="5" class="is-center">No clients found</td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
</div>

<div class="pure-g">
  <div class="pure-u-1">
    <div class="form-buttons">
      <%= link_to "New client", new_client_path, class: "pure-button pure-button-primary" %>
    </div>
  </div>
</div>
